# Max request body size
client_max_body_size 8M;
# NOTE: Also check the php.ini for the following settings:
#       post_max_size (default: 8M)
#       upload_max_filesize (default: 2M)

# Block: xmlrpc.php
#        wp-config.php
location ~ /(?:xmlrpc|wp-config)\.php(?:/|$) {
    include servers.d/common/block;
}

# Block: wp-includes/**/*.php
#        wp-content/**/*.php
location ~ /wp-(?:includes|content)/.+\.php(?:/|$) {
    include servers.d/common/block;
}

location ~ ^/wp-cron\.php$ {
    access_log off;
    fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
    include servers.d/common/php;
}

# Handling PHP requests
location ~ [^/]\.php(?:/|$) {
    fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
    include servers.d/common/php;
}
